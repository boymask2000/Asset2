<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>
	<ui:composition template="/template/commonTemplate.xhtml">
		<ui:define name="content">
<f:view locale="#{language.locale}">
			<h:form id="form">
				<p:panel>
					<p:growl id="msgs" showDetail="true" />
					<h:panelGrid columns="2" cellpadding="1">
						<p:panel id="baic">
						
							<h:panelGrid columns="2" cellpadding="1">
								<h:outputText value="ID" />
								<h:outputText value="#{managedAssetBean.selectedAsset.id}" />
								<h:outputText value="Fac #" />
								<h:inputText value="#{managedAssetBean.selectedAsset.facNum}" />
								<h:outputText value="facSystem" />
								<h:inputText value="#{managedAssetBean.selectedAsset.facSystem}" />
								<h:outputText value="facSubsystem" />
								<h:inputText
									value="#{managedAssetBean.selectedAsset.facSubsystem}" />
								<h:outputText value="assemblyCategory" />
								<h:inputText
									value="#{managedAssetBean.selectedAsset.assemblyCategory}" />
								<h:outputText value="nomenclature" />
								<h:inputText
									value="#{managedAssetBean.selectedAsset.nomenclature}" />
								<h:outputText value="procId" />
								<h:inputText value="#{managedAssetBean.selectedAsset.procId}" />
								<h:outputText value="pmSchedRecipient" />
								<h:inputText
									value="#{managedAssetBean.selectedAsset.pmSchedRecipient}" />
								<h:outputText value="pmSchedSerial" />
								<h:inputText
									value="#{managedAssetBean.selectedAsset.pmSchedSerial}" />

								<h:outputText value="rpieIdIndividual" />
								<h:outputText
									value="#{managedAssetBean.selectedAsset.rpieIdIndividual}" />
								<h:outputText value="schedAssignedOrg" />
								<h:inputText
									value="#{managedAssetBean.selectedAsset.schedAssignedOrg}" />


							</h:panelGrid>
							<p:commandButton action="#{managedAssetBean.updateAsset}"
								value="update" update=":form" />
						</p:panel>
						<p:panel id="bc0">
							<p:panel id="bc" header="Stat">
								<table style="width: 100%">
									<tr>
										<td width="100"></td>
									</tr>
									<tr>
										<td height="40px" bgcolor="#{managedAssetBean.color}"></td>
									</tr>
									<tr>
										<td>
										<p:inputTextarea readonly="true" rows="3" cols="50"
										value="#{managedAssetBean.commento}" rendered="#{managedAssetBean.commento!=null}"/>
										</td>
									</tr>
								</table>
							</p:panel>
							<p:panel header="Interventi Eseguiti">
								<p:dataTable id="radiopDT" selectionMode="single"
									value="#{managedInterventiBean.getInterventiForAsset(managedAssetBean.selectedAsset.id,true)}"
									var="c" selection="#{managedInterventiBean.selectedIntevento}"
									rowKey="#{c.id}" paginator="true" rows="5"
									paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="5,10,15">
									<p:ajax event="rowSelect"
										listener="#{managedInterventiBean.onRowSelect}"
										update=":form:msgs" />
									<p:column headerText="Data Prevista">
										<h:outputText value="#{c.data_pianificata}" />
									</p:column>
									<p:column headerText="Data Effettiva">
										<h:outputText value="#{c.data_effettiva}" />
									</p:column>
									<p:column headerText="Esito"
										styleClass="{'background':'yellow'}">
										<!-- 									<h:outputText value="#{c.esito}" /> -->
										<table>
											<tr bgcolor="#{managedAssetBean.status.getColor(c.esito)}">
												<td></td>
											</tr>
										</table>
									</p:column>
									<f:facet name="footer">
										<h:commandButton action="dettaglioIntervento" value="Detail">
										</h:commandButton>
									</f:facet>
								</p:dataTable>
							</p:panel>
							<p:panel header="Interventi Pianificati">
								<p:dataTable id="radio0DT" selectionMode="single"
									value="#{managedInterventiBean.getInterventiForAsset(managedAssetBean.selectedAsset.id,false)}"
									var="c" selection="#{managedInterventiBean.selectedIntevento}"
									rowKey="#{c.id}" paginator="true" rows="5"
									paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="5,10,15">
									<p:ajax event="rowSelect"
										listener="#{managedInterventiBean.onRowSelect}"
										update=":form:msgs" />
									<p:column headerText="Data Prevista">
										<h:outputText value="#{c.data_pianificata}" />
									</p:column>

									<f:facet name="footer">
										<h:commandButton action="goInsertIntervento" value="Detail">
										</h:commandButton>
									</f:facet>
								</p:dataTable>
							</p:panel>

							<p:panel id="bajsic" header="Manuali">

								<p:dataTable id="radioDT" selectionMode="single"
									value="#{managedManualiBean.getManualiForAsset(managedAssetBean.selectedAsset.id)}"
									var="c" selection="#{managedManualiBean.selectedManuale}"
									rowKey="#{c.id}" paginator="true" rows="5"
									paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="5,10,15">

									<p:ajax event="rowSelect"
										listener="#{managedManualiBean.onRowSelect}"
										update=":form:msgs" />

									<p:column headerText="Descrizione">
										<h:outputText value="#{c.descrizione}" />
									</p:column>

									<p:column headerText="File">
										<h:outputText value="#{c.nomefile}" />
									</p:column>
									<p:column>
										<h:commandButton rendered="#{c.pdf}"
											action="#{managedManualiBean.setupViewFile(c.nomefile)}"
											value="View" />
									</p:column>

									<f:facet name="footer">

										<p:commandButton process="radioDT" update=":panSetPass0"
											icon="pi pi-search" value="New"
											oncomplete="PF('setPassDialog0').show()" />

									</f:facet>
								</p:dataTable>

							</p:panel>
						</p:panel>
					</h:panelGrid>

					<h:commandButton value="#{msg['STAMPA']}"
						action="#{printCreatorFullDettaglioAsset.printFullAsset}" />
					<h:commandButton value="Frequenze" action="frequenzeAlcaHome"
						rendered="false" />
				</p:panel>
			</h:form>
			<p:dialog header="Nuovo manuale" widgetVar="setPassDialog0"
				modal="true" showEffect="fade" hideEffect="fade" resizable="false">
				<p:outputPanel id="panSetPass0" style="text-align:center;">
					<p:panelGrid columns="2" columnClasses="label,value">
						<p:panel id="basic11" style="margin-bottom:20px">
							<h:form enctype="multipart/form-data">
								<p:growl id="messages" showDetail="true" />
								<h:outputText value="Descrizione manuale " />
								<h:inputText value="#{manualeUpload.currentManuale.descrizione}"
									required="true" />
								<p:fileUpload value="#{manualeUpload.file}" mode="advanced"
									allowTypes="/(\.|\/)(pdf)$/" update=":form" process="@form"
									fileUploadListener="#{manualeUpload.handleFileUpload}">

								</p:fileUpload>

							</h:form>
						</p:panel>
					</p:panelGrid>
				</p:outputPanel>
			</p:dialog>

			<p:commandButton value="GO BACK!" onclick="window.history.back();" />

</f:view>
		</ui:define>
	</ui:composition>
</h:body>
</html>
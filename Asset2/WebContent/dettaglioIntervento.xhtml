<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>
	<ui:composition template="/template/commonTemplate.xhtml">
		<ui:define name="content">
			<f:view locale="#{language.locale}">
				<h:form id="form">
					<p:panel>

						<p:growl id="msgs" showDetail="true" />
						<h:panelGrid columns="2" cellpadding="1">
							<p:panel id="baic">
								<h:panelGrid columns="2" cellpadding="1">
									<h:outputText value="ID" />
									<h:outputText value="#{managedAssetBean.selectedAsset.id}" />
									<h:outputText value="Fac #" />
									<h:outputText value="#{managedAssetBean.selectedAsset.facNum}" />
									<h:outputText value="facSystem" />
									<h:outputText
										value="#{managedAssetBean.selectedAsset.facSystem}" />
									<h:outputText value="facSubsystem" />
									<h:outputText
										value="#{managedAssetBean.selectedAsset.facSubsystem}" />
									<h:outputText value="assemblyCategory" />
									<h:outputText
										value="#{managedAssetBean.selectedAsset.assemblyCategory}" />
									<h:outputText value="nomenclature" />
									<h:outputText
										value="#{managedAssetBean.selectedAsset.nomenclature}" />
									<h:outputText value="procId" />
									<h:outputText value="#{managedAssetBean.selectedAsset.procId}" />
									<h:outputText value="pmSchedRecipient" />
									<h:outputText
										value="#{managedAssetBean.selectedAsset.pmSchedRecipient}" />
									<h:outputText value="pmSchedSerial" />
									<h:outputText
										value="#{managedAssetBean.selectedAsset.pmSchedSerial}" />

									<h:outputText value="rpieIdIndividual" />
									<h:outputText
										value="#{managedAssetBean.selectedAsset.rpieIdIndividual}" />
									<h:outputText value="schedAssignedOrg" />
									<h:outputText
										value="#{managedAssetBean.selectedAsset.schedAssignedOrg}" />
									<h:outputText value="lastStatus" />
									<h:outputText
										value="#{managedAssetBean.selectedAsset.lastStatus}" />
								</h:panelGrid>

							</p:panel>
							<p:panel id="bc0">
								<h:panelGrid columns="2" cellpadding="1">
									<h:outputText value="#{msg['ID_INTERVENTO']}" />
									<h:outputText
										value="#{managedInterventiBean.selectedIntevento.id}" />
									<h:outputText value="#{msg['DATA_PREVISTA']}" />
									<h:outputText
										value="#{timeUtil.getLocalizedDate(managedInterventiBean.selectedIntevento.data_pianificata)}" />
									<h:outputText value="#{msg['DATA_EFFETTIVA']}" />
									<h:outputText
										value="#{timeUtil.getLocalizedDate(managedInterventiBean.selectedIntevento.data_effettiva)}" />

									<h:outputText value="#{msg['UTENTE']}" />
									<h:outputText
										value="#{managedInterventiBean.selectedIntevento.user}" />

								</h:panelGrid>


								<p:panel id="basic" header="#{msg['SELEZIONARE_ESITO']}">
									<table style="width: 100%">
										<tr>
											<td width="100"></td>
											<td width="100"></td>
											<td width="100"></td>
											<td width="100"></td>
											<td width="100"></td>
											<td width="100"></td>

											<td width="100"></td>
											<td width="100"></td>
											<td width="100"></td>
										</tr>
										<tr>
											<td height="40px" bgcolor="#548235"></td>
											<td height="40px" bgcolor="#A9D08E"></td>
											<td height="40px" bgcolor="#E2EFDA"></td>
											<td height="40px" bgcolor="#BF8F00"></td>
											<td height="40px" bgcolor="#FFD966"></td>
											<td height="40px" bgcolor="#FFF2CC"></td>
											<td height="40px" bgcolor="#FFC1C1"></td>
											<td height="40px" bgcolor="#FF4F4F"></td>
											
<td height="40px" bgcolor="#EB0000"></td>
										</tr>

										<tr>
											<td height="70px" align="center"><p:commandButton
													title="Select" update=":form">
													<h:outputText styleClass="pi pi-search"
														style="margin:0 auto;" />
													<f:setPropertyActionListener value="1"
														target="#{managedInterventiBean.esito}" />
												</p:commandButton></td>

											<td align="center"><p:commandButton title="Select"
													update=":form">
													<h:outputText styleClass="pi pi-search"
														style="margin:0 auto;" />
													<f:setPropertyActionListener value="2"
														target="#{managedInterventiBean.esito}" />
												</p:commandButton></td>
											<td align="center"><p:commandButton title="Select"
													update=":form">
													<h:outputText styleClass="pi pi-search"
														style="margin:0 auto;" />
													<f:setPropertyActionListener value="3"
														target="#{managedInterventiBean.esito}" />
												</p:commandButton></td>
											<td align="center"><p:commandButton title="Select"
													update=":form">
													<h:outputText styleClass="pi pi-search"
														style="margin:0 auto;" />
													<f:setPropertyActionListener value="4"
														target="#{managedInterventiBean.esito}" />
												</p:commandButton></td>
											<td align="center"><p:commandButton title="Select"
													update=":form">
													<h:outputText styleClass="pi pi-search"
														style="margin:0 auto;" />
													<f:setPropertyActionListener value="5"
														target="#{managedInterventiBean.esito}" />
												</p:commandButton></td>
											<td align="center"><p:commandButton title="Select"
													update=":form">
													<h:outputText styleClass="pi pi-search"
														style="margin:0 auto;" />
													<f:setPropertyActionListener value="6"
														target="#{managedInterventiBean.esito}" />
												</p:commandButton></td>
											<td align="center"><p:commandButton title="Select"
													update=":form">
													<h:outputText styleClass="pi pi-search"
														style="margin:0 auto;" />
													<f:setPropertyActionListener value="7"
														target="#{managedInterventiBean.esito}" />
												</p:commandButton></td>
											<td align="center"><p:commandButton title="Select"
													update=":form">
													<h:outputText styleClass="pi pi-search"
														style="margin:0 auto;" />
													<f:setPropertyActionListener value="8"
														target="#{managedInterventiBean.esito}" />
												</p:commandButton></td>
											<td align="center"><p:commandButton title="Select"
													update=":form">
													<h:outputText styleClass="pi pi-search"
														style="margin:0 auto;" />
													<f:setPropertyActionListener value="9"
														target="#{managedInterventiBean.esito}" />
												</p:commandButton></td>

										</tr>

									</table>
									<table style="width: 100%">
										<tr>
											<td width="100"></td>
										</tr>
										<tr>
											<td height="40px"
												bgcolor="#{managedAssetBean.status.getColor(managedInterventiBean.esito)}"></td>
										</tr>


									</table>
								</p:panel>

								<h:outputText value="#{msg['NOTE']}" />
								<p:inputTextarea readonly="true" rows="3" cols="50"
									value="#{managedInterventiBean.selectedIntevento.commento}" />
								<!-- CHECKLIST INIZIO -->
								<p:panel>
									<p:dataTable id="radioDTd" paginatorPosition="bottom" 
										value="#{managedChecklistBean.getChecksForInterventoId(managedInterventiBean.selectedIntevento.id)}"
										var="c" rowKey="#{c.id}" paginator="true" rows="5"
										paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
										rowsPerPageTemplate="5,10,15">
										<f:facet name="header">
									 Checklist
									 </f:facet>
										<p:column headerText="#{msg['DESCRIZIONE']}"
											rendered="#{languageBean.isItalian()}">
											<h:outputText value="#{c.description}" />
										</p:column>
										<p:column headerText="#{msg['DESCRIZIONE']}"
											rendered="#{! languageBean.isItalian()}">
											<h:outputText value="#{c.descriptionUS}" />
										</p:column>

									</p:dataTable>
								</p:panel>
								<!-- CHECKLIST FINE -->

								<!-- 								<p:panel id="bajsic" header="#{msg['DOCUMENTI']}"> -->
								<p:panel>
									<p:dataTable id="radioDT" selectionMode="single"
										paginatorPosition="bottom"
										value="#{managedDocInterventiBean.getDocsForIntervento(managedInterventiBean.selectedIntevento.id)}"
										var="c"
										selection="#{managedDocInterventiBean.selectedDocIntervento}"
										rowKey="#{c.id}" paginator="true" rows="5"
										paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
										rowsPerPageTemplate="5,10,15">
										<f:facet name="header">
     #{msg['DOCUMENTI']}
        </f:facet>

										<p:ajax event="rowSelect"
											listener="#{managedDocInterventiBean.onRowSelect}"
											update=":form:msgs" />

										<p:column headerText="#{msg['DESCRIZIONE']}">
											<h:outputText value="#{c.descrizione}" />
										</p:column>

										<p:column headerText="File">
											<h:outputText value="#{c.filename}" />
										</p:column>
										<p:column>
											<h:commandButton
												action="#{managedDocInterventiBean.setupViewFile(c.filename)}"
												value="View" />
										</p:column>

										<f:facet name="footer">

											<p:commandButton process="radioDT" update=":panSetPass0"
												icon="pi pi-search" value="#{msg['ADD_DOC']}"
												oncomplete="PF('setPassDialog0').show()" />

										</f:facet>
									</p:dataTable>
								</p:panel>

								<table>
									<tr>
										<ui:repeat var="o"
											value="#{managedFotoInterventoBean.fotoPerIntervento}">
											<td><p:graphicImage name="images/#{o.filename}"
													styleClass="content" width="100" height="100" /></td>
										</ui:repeat>
									</tr>
								</table>

								<p:commandButton process="radioDT" update="panIntPass0"
									icon="pi pi-search" value="#{msg['ADD_TASK']}"
									oncomplete="PF('setIntDialog0').show()" />

							</p:panel>

						</h:panelGrid>


						<h:commandButton value="#{msg['STAMPA']}"
							action="#{printCreatorIntervento.printIntervento2}" />


<h:commandButton value="#{msg['BACK']}" action="back"/>

					</p:panel>
				</h:form>

				<p:dialog header="#{msg['ADD_TASK']}" widgetVar="setIntDialog0"
					modal="true" showEffect="fade" hideEffect="fade" resizable="false">
					<p:outputPanel id="panIntPass0" style="text-align:center;">

						

							<p:calendar id="popup"
								value="#{managedInterventiBean.dataNuovoIntervento}"
								pattern="yyyyMMdd" />

							<p:commandButton update=":form" icon="pi pi-search"
								value="#{msg['ADD_TASK']}"
								action="#{managedInterventiBean.nuovoIntervento}"
								oncomplete="PF('setIntDialog0').hide();" />
						
					</p:outputPanel>
				</p:dialog>



				<p:dialog header="#{msg['ADD_DOC']}" widgetVar="setPassDialog0"
					modal="true" showEffect="fade" hideEffect="fade" resizable="false">
					<p:outputPanel id="panSetPass0" style="text-align:center;">
						<p:panelGrid columns="2" columnClasses="label,value">
							<p:panel id="basic11" style="margin-bottom:20px">
								<h:form enctype="multipart/form-data">
									<p:growl id="messages" showDetail="true" />
									<h:outputText value="#{msg['DESCRIZIONE']}" />
									<h:inputText value="#{docInterventoUpload.desc}"
										required="true" />
									<p:fileUpload value="#{docInterventoUpload.file}"
										mode="advanced" allowTypes="/(\.|\/)(pdf)$/" update=":form"
										process="@form"
										fileUploadListener="#{docInterventoUpload.handleFileUpload}">
										<f:attribute name="intId" update=":form"
											value="#{managedInterventiBean.selectedIntevento.id}" />

									</p:fileUpload>

								</h:form>
							</p:panel>
						</p:panelGrid>
					</p:outputPanel>
				</p:dialog>
			</f:view>
		</ui:define>
	</ui:composition>
</h:body>
</html>